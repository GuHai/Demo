<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.yskj.dao.AdverDao">    <!-- 查询字段 -->    <sql id="columnList">	a.id,	 a.cityID, a.startTime, a.endTime, a.position, a.imgUrl, a.connectionUrl, a.adverState, a.description, a.sort, a.sleep, a.createTime, a.updateTime, a.version, a.isDeleted, a.createBy, a.updateBy</sql>    <!--通过id集合in查询-->    <sql id="inClause">        <if test="column!=null">            <if test="ids==null">                and 1=0            </if>            <if test="ids!=null">                <if test="ids.size>0">                    and a.${column} in                    <foreach item="items" index="index" collection="ids" open="(" separator="," close=")">                        #{items}                    </foreach>                </if>                <if test="ids.size==0">                    and 1=0                </if>            </if>        </if>    </sql>    <!-- 查询条件 -->    <sql id="whereClause">        where 1=1        <trim suffixOverrides=",">            <if test="condition.id != null">                and a.id = #{condition.id}            </if>            <if test="condition.cityID != null">and a.cityID = #{condition.cityID}</if>            <if test="condition.startTime != null">and a.startTime = #{condition.startTime}</if>            <if test="condition.endTime != null">and a.endTime = #{condition.endTime}</if>            <if test="condition.position != null">and a.position = #{condition.position}</if>            <if test="condition.imgUrl != null">and a.imgUrl = #{condition.imgUrl}</if>            <if test="condition.connectionUrl != null">and a.connectionUrl = #{condition.connectionUrl}</if>            <if test="condition.adverState != null">and a.adverState = #{condition.adverState}</if>            <if test="condition.description != null">and a.description = #{condition.description}</if>            <if test="condition.sort != null">and a.sort = #{condition.sort}</if>            <if test="condition.sleep != null">and a.sleep = #{condition.sleep}</if>            <if test="condition.createTime != null">and a.createTime = #{condition.createTime}</if>            <if test="condition.updateTime != null">and a.updateTime = #{condition.updateTime}</if>            <if test="condition.version != null">and a.version = #{condition.version}</if>            <if test="condition.isDeleted != null">and a.isDeleted = #{condition.isDeleted}</if>            <if test="condition.createBy != null">and a.createBy = #{condition.createBy}</if>            <if test="condition.updateBy != null">and a.updateBy = #{condition.updateBy}</if>            <include refid="inClause"/>        </trim>    </sql>    <!-- 模糊查询条件 -->    <sql id="whereLikeClause">        where 1=1        <trim suffixOverrides=",">            <if test="condition.id != null">                and a.id = #{condition.id}            </if>            <if test="condition.cityID != null">and UPPER(a.cityID) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.cityID}),'%'))            </if>            <if test="condition.startTime != null">and UPPER(a.startTime) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.startTime}),'%'))            </if>            <if test="condition.endTime != null">and UPPER(a.endTime) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.endTime}),'%'))            </if>            <if test="condition.position != null">and UPPER(a.position) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.position}),'%'))            </if>            <if test="condition.imgUrl != null">and UPPER(a.imgUrl) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.imgUrl}),'%'))            </if>            <if test="condition.connectionUrl != null">and UPPER(a.connectionUrl) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.connectionUrl}),'%'))            </if>            <if test="condition.adverState != null">and UPPER(a.adverState) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.adverState}),'%'))            </if>            <if test="condition.description != null">and UPPER(a.description) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.description}),'%'))            </if>            <if test="condition.sort != null">and UPPER(a.sort) LIKE UPPER(CONCAT(CONCAT('%',#{condition.sort}),'%'))            </if>            <if test="condition.sleep != null">and UPPER(a.sleep) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.sleep}),'%'))            </if>            <if test="condition.createTime != null">and UPPER(a.createTime) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.createTime}),'%'))            </if>            <if test="condition.updateTime != null">and UPPER(a.updateTime) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.updateTime}),'%'))            </if>            <if test="condition.version != null">and UPPER(a.version) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.version}),'%'))            </if>            <if test="condition.isDeleted != null">and UPPER(a.isDeleted) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.isDeleted}),'%'))            </if>            <if test="condition.createBy != null">and UPPER(a.createBy) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.createBy}),'%'))            </if>            <if test="condition.updateBy != null">and UPPER(a.updateBy) LIKE                UPPER(CONCAT(CONCAT('%',#{condition.updateBy}),'%'))            </if>            <include refid="inClause"/>        </trim>    </sql>    <!-- 插入记录 -->    <insert id="add">  insert into adver (id,cityID,startTime,endTime,position,imgUrl,connectionUrl,adverState,description,sort,sleep,createTime,updateTime,version,isDeleted,createBy,updateBy)  values(#{id,jdbcType=VARCHAR},#{cityID},#{startTime},#{endTime},#{position},#{imgUrl},#{connectionUrl},#{adverState},#{description},#{sort},#{sleep},#{createTime},#{updateTime},#{version},#{isDeleted},#{createBy},#{updateBy})</insert>    <!-- 修改记录，只修改只不为空的字段 -->    <update id="update">        update adver set        <trim suffixOverrides=",">            <if test="cityID != null ">cityID=#{cityID},</if>            <if test="startTime != null ">startTime=#{startTime},</if>            <if test="endTime != null ">endTime=#{endTime},</if>            <if test="position != null ">position=#{position},</if>            <if test="imgUrl != null ">imgUrl=#{imgUrl},</if>            <if test="connectionUrl != null ">connectionUrl=#{connectionUrl},</if>            <if test="adverState != null ">adverState=#{adverState},</if>            <if test="description != null ">description=#{description},</if>            <if test="sort != null ">sort=#{sort},</if>            <if test="sleep != null ">sleep=#{sleep},</if>            <if test="createTime != null ">createTime=#{createTime},</if>            <if test="updateTime != null ">updateTime=#{updateTime},</if>            <if test="version != null ">version=#{version},</if>            <if test="isDeleted != null ">isDeleted=#{isDeleted},</if>            <if test="createBy != null ">createBy=#{createBy},</if>            <if test="updateBy != null ">updateBy=#{updateBy},</if>        </trim>        where id=#{id} and version = #{version}-1    </update>    <!-- 删除记录 -->    <delete id="del">	delete from adver where id = #{id} and version = #{version}</delete>    <!-- 根据id查询  -->    <select id="get" resultType="Adver" parameterType="String">        select        <include refid="columnList"/>        from adver a        where a.id = #{id}    </select>    <!-- 列表总数-->    <select id="count" resultType="java.lang.Long">        select count(1)        from adver a        <include refid="whereClause"/>    </select>    <!-- 查询page -->    <select id="findPage" resultType="Adver">        select        <include refid="columnList"/>        from adver a        <include refid="whereClause"/>        <if test="orderByClause!=null">${orderByClause}</if>    </select>    <!-- 模糊查询page -->    <select id="findLikePage" resultType="Adver">        select        <include refid="columnList"/>        from adver a        <include refid="whereLikeClause"/>        <if test="orderByClause!=null">${orderByClause}</if>    </select>    <!-- 查询列表list -->    <select id="findList" resultType="Adver">        select        <include refid="columnList"/>        from adver a        <include refid="whereClause"/>        <if test="orderByClause!=null">${orderByClause}</if>    </select>    <!--模糊查询list-->    <select id="findLikeList" resultType="Adver">        select        <include refid="columnList"/>        from adver a        <include refid="whereLikeClause"/>        <if test="orderByClause!=null">${orderByClause}</if>    </select>    <!-- 查询符合条件的数据的id集合 -->    <select id="findIds" resultType="String">        select a.id        from adver a        <include refid="whereClause"/>        <if test="orderByClause!=null">${orderByClause}</if>    </select>    <!-- 查询符合模糊条件的数据的id集合 -->    <select id="findLikeIds" resultType="String">        select a.id        from adver a        <include refid="whereLikeClause"/>        <if test="orderByClause!=null">${orderByClause}</if>    </select>    <!-- 获取一个对象通过非id -->    <select id="one" resultType="Adver">        select        <include refid="columnList"/>        from adver a        <include refid="whereClause"/>        <if test="orderByClause!=null">${orderByClause}</if>        limit 0,1    </select>    <!--如果你想返回一个HashMap 就实现这个select标签-->    <select id="queryHashMap" resultType="java.util.HashMap" parameterType="Object">    </select>    <select id="getAdverInfo" resultType="Adver" parameterType="java.util.Map">        SELECT        <include refid="columnList"/>        FROM adver a WHERE a.`adverState` = 1 AND        a.`isDeleted` = 1 AND a.`endTime` &gt; NOW() AND a.`startTime` &lt; NOW()        AND a.`cityID` = #{cityID} AND a.`position` = #{position}    </select></mapper>