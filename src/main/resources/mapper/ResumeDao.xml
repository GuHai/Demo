<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.yskj.dao.ResumeDao" ><!-- 查询字段 --><sql id="columnList" >	r.id,	 r.resumeTitle, r.resumeHeadImg, r.resumeName, r.IDCard, r.sex, r.marriage, r.phoneNumber, r.email, r.residence, r.evaluation, r.userID,r.height,r.weight, r.isDefault, r.state, r.createTime, r.updateTime, r.version, r.isDeleted, r.createBy, r.updateBy,r.age,r.schoolLevel</sql><!--通过id集合in查询--><sql id="inClause">    <if test="column!=null">        <if test="ids==null">            and 1=0        </if>        <if test="ids!=null">            <if test="ids.size>0">                and  r.${column} in                <foreach item="items" index="index" collection="ids" open="(" separator="," close=")">                    #{items}                </foreach>            </if>            <if test="ids.size==0">                and 1=0            </if>        </if>    </if></sql><!-- 查询条件 --><sql id="whereClause">where 1=1<trim  suffixOverrides="," >	<if test="condition.id != null" >	    and r.id = #{condition.id}	</if>	<if test="condition.resumeTitle != null" >and  r.resumeTitle = #{condition.resumeTitle}</if><if test="condition.resumeHeadImg != null" >and  r.resumeHeadImg = #{condition.resumeHeadImg}</if><if test="condition.resumeName != null" >and  r.resumeName = #{condition.resumeName}</if><if test="condition.IDCard != null" >and  r.IDCard = #{condition.IDCard}</if><if test="condition.sex != null" >and  r.sex = #{condition.sex}</if><if test="condition.marriage != null" >and  r.marriage = #{condition.marriage}</if><if test="condition.phoneNumber != null" >and  r.phoneNumber = #{condition.phoneNumber}</if><if test="condition.email != null" >and  r.email = #{condition.email}</if><if test="condition.residence != null" >and  r.residence = #{condition.residence}</if><if test="condition.evaluation != null" >and  r.evaluation = #{condition.evaluation}</if><if test="condition.userID != null" >and  r.userID = #{condition.userID}</if><if test="condition.height != null" >and  r.height = #{condition.height}</if><if test="condition.weight != null" >and  r.weight = #{condition.weight}</if><if test="condition.isDefault != null" >and  r.isDefault = #{condition.isDefault}</if><if test="condition.state != null" >and  r.state = #{condition.state}</if><if test="condition.createTime != null" >and  r.createTime = #{condition.createTime}</if><if test="condition.updateTime != null" >and  r.updateTime = #{condition.updateTime}</if><if test="condition.version != null" >and  r.version = #{condition.version}</if><if test="condition.isDeleted != null" >and  r.isDeleted = #{condition.isDeleted}</if><if test="condition.createBy != null" >and  r.createBy = #{condition.createBy}</if><if test="condition.updateBy != null" >and  r.updateBy = #{condition.updateBy}</if><if test="condition.age != null" >and  r.age = #{condition.age}</if><if test="condition.schoolLevel != null" >and  r.schoolLevel = #{condition.schoolLevel}</if></trim><include refid="inClause"/></sql><!-- 模糊查询条件 --><sql id="whereLikeClause">where 1=1<trim  suffixOverrides="," >	<if test="condition.id != null" >	    and r.id = #{condition.id}	</if>													 			<if test="condition.resumeTitle != null" >and  UPPER(r.resumeTitle) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.resumeTitle}),'%'))</if><if test="condition.resumeHeadImg != null" >and  UPPER(r.resumeHeadImg) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.resumeHeadImg}),'%'))</if><if test="condition.resumeName != null" >and  UPPER(r.resumeName) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.resumeName}),'%'))</if><if test="condition.IDCard != null" >and  UPPER(r.IDCard) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.IDCard}),'%'))</if><if test="condition.sex != null" >and  UPPER(r.sex) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.sex}),'%'))</if><if test="condition.marriage != null" >and  UPPER(r.marriage) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.marriage}),'%'))</if><if test="condition.phoneNumber != null" >and  UPPER(r.phoneNumber) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.phoneNumber}),'%'))</if><if test="condition.email != null" >and  UPPER(r.email) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.email}),'%'))</if><if test="condition.residence != null" >and  UPPER(r.residence) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.residence}),'%'))</if><if test="condition.evaluation != null" >and  UPPER(r.evaluation) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.evaluation}),'%'))</if><if test="condition.userID != null" >and  UPPER(r.userID) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.userID}),'%'))</if><if test="condition.height != null" >and  UPPER(r.height) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.height}),'%'))</if><if test="condition.weight != null" >and  UPPER(r.weight) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.weight}),'%'))</if><if test="condition.isDefault != null" >and  UPPER(r.isDefault) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.isDefault}),'%'))</if><if test="condition.state != null" >and  UPPER(r.state) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.state}),'%'))</if><if test="condition.createTime != null" >and  UPPER(r.createTime) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.createTime}),'%'))</if><if test="condition.updateTime != null" >and  UPPER(r.updateTime) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.updateTime}),'%'))</if><if test="condition.version != null" >and  UPPER(r.version) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.version}),'%'))</if><if test="condition.isDeleted != null" >and  UPPER(r.isDeleted) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.isDeleted}),'%'))</if><if test="condition.createBy != null" >and  UPPER(r.createBy) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.createBy}),'%'))</if><if test="condition.updateBy != null" >and  UPPER(r.updateBy) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.updateBy}),'%'))</if><if test="condition.age != null" >and  UPPER(r.age) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.age}),'%'))</if><if test="condition.schoolLevel != null" >and  UPPER(r.schoolLevel) LIKE   UPPER(CONCAT(CONCAT('%',#{condition.schoolLevel}),'%'))</if></trim><include refid="inClause"/></sql><!-- 插入记录 --><insert id="add"  >  insert into resume (id,resumeTitle,resumeHeadImg,resumeName,IDCard,sex,marriage,phoneNumber,email,residence,evaluation,userID,height,weight,isDefault,state,createTime,updateTime,version,isDeleted,createBy,updateBy,age,schoolLevel)  values(#{id,jdbcType=VARCHAR},#{resumeTitle},#{resumeHeadImg},#{resumeName},#{IDCard},#{sex},#{marriage},#{phoneNumber},#{email},#{residence},#{evaluation},#{userID},#{height},#{weight},#{isDefault},#{state},#{createTime},#{updateTime},#{version},#{isDeleted},#{createBy},#{updateBy},#{age},#{schoolLevel})</insert><!-- 修改记录，只修改只不为空的字段 --><update id="update" >	update resume set	<trim  suffixOverrides="," >	<if test="resumeTitle != null ">resumeTitle=#{resumeTitle},</if><if test="resumeHeadImg != null ">resumeHeadImg=#{resumeHeadImg},</if><if test="resumeName != null ">resumeName=#{resumeName},</if><if test="IDCard != null ">IDCard=#{IDCard},</if><if test="sex != null ">sex=#{sex},</if><if test="marriage != null ">marriage=#{marriage},</if><if test="phoneNumber != null ">phoneNumber=#{phoneNumber},</if><if test="email != null ">email=#{email},</if><if test="residence != null ">residence=#{residence},</if><if test="evaluation != null ">evaluation=#{evaluation},</if><if test="userID != null ">userID=#{userID},</if><if test="height != null ">height=#{height},</if><if test="weight != null ">weight=#{weight},</if><if test="isDefault != null ">isDefault=#{isDefault},</if><if test="state != null ">state=#{state},</if><if test="createTime != null ">createTime=#{createTime},</if><if test="updateTime != null ">updateTime=#{updateTime},</if><if test="version != null ">version=#{version},</if><if test="isDeleted != null ">isDeleted=#{isDeleted},</if><if test="createBy != null ">createBy=#{createBy},</if><if test="updateBy != null ">updateBy=#{updateBy},</if><if test="age != null ">age=#{age},</if><if test="schoolLevel != null ">schoolLevel=#{schoolLevel},</if>	</trim> where id=#{id} and version = #{version}-1</update><!-- 删除记录 --><delete id="del" >	delete from resume where id = #{id}</delete><!-- 根据id查询  --><select id="get"   resultType="Resume"  parameterType="String">	select <include refid="columnList" /> 	from resume  r	where  r.id = #{id}  and r.isDeleted = false</select><!-- 列表总数--><select id="count" resultType="java.lang.Long" >	select count(1) 	from resume  r	<include refid="whereClause"/></select><!-- 查询page --><select id="findPage" resultType="Resume" >	select 	<include refid="columnList"/>	from resume r	<include refid="whereClause"/>	<if test="orderByClause!=null">${orderByClause}</if></select><!-- 模糊查询page --><select id="findLikePage" resultType="Resume" >	select 	<include refid="columnList"/>	from resume r	<include refid="whereLikeClause"/>	<if test="orderByClause!=null">${orderByClause}</if></select><!-- 查询列表list --><select id="findList" resultType="Resume" >	select	<include refid="columnList"/>	from resume r	<include refid="whereClause"/>	<if test="orderByClause!=null">${orderByClause}</if></select><!--模糊查询list--><select id="findLikeList" resultType="Resume" >	select	<include refid="columnList"/>	from resume r	<include refid="whereLikeClause"/>	<if test="orderByClause!=null">${orderByClause}</if></select><!-- 查询符合条件的数据的id集合 --><select id="findIds" resultType="String">	select r.${idsColumn}	from resume r    <include refid="whereClause"/>    <if test="orderByClause!=null">${orderByClause}</if></select><!-- 查询符合模糊条件的数据的id集合 --><select id="findLikeIds" resultType="String">	select r.${idsColumn}	from resume r    <include refid="whereLikeClause"/>    <if test="orderByClause!=null">${orderByClause}</if></select><!-- 获取一个对象通过非id --><select id="one" resultType="Resume" >     select    <include refid="columnList"/>     from resume r    <include refid="whereClause"/>    <if test="orderByClause!=null">${orderByClause}</if>    limit 0,1</select><!--如果你想返回一个HashMap 就实现这个select标签--><select id="queryHashMap" resultType="java.util.HashMap"  parameterType="Object"></select><select id="personLikeSearch" parameterType="java.util.Map" resultType="Resume">	select  <include refid="columnList"/> from resume r LEFT JOIN `educational` e ON r.id = e.resumeID LEFT JOIN `workexperience` w ON w.resumeID = r.id	WHERE r.resumeTitle LIKE CONCAT(CONCAT('%',#{keyword}),'%')	OR r.resumeName LIKE CONCAT(CONCAT('%',#{keyword}),'%')	OR r.sex LIKE CONCAT(CONCAT('%',#{keyword}),'%')	OR e.major LIKE CONCAT(CONCAT('%',#{keyword}),'%')	OR e.schoolName LIKE CONCAT(CONCAT('%',#{keyword}),'%')	OR e.education LIKE CONCAT(CONCAT('%',#{keyword}),'%')	OR w.companyName LIKE CONCAT(CONCAT('%',#{keyword}),'%')	OR w.jobName LIKE CONCAT(CONCAT('%',#{keyword}),'%')	GROUP BY r.id	ORDER BY r.createTime DESC	LIMIT #{startIndex} ,#{pageSize}</select>    <select id="personSearch" resultType="java.util.Map" parameterType="java.util.Map">        SELECT        r.resumeName,r.id,r.resumeHeadImg,e.education,r.evaluation,r.userID        FROM        `resume` r        LEFT JOIN        `intentiontype` t ON r.userID = t.userID        LEFT JOIN `huntingtype` h ON h.id = t.htID        LEFT JOIN `intentiondate` d ON d.userID = t.userID        LEFT JOIN `intentionaddress` a ON d.userID = a.userID        LEFT JOIN `educational` e ON e.resumeID = r.id        WHERE r.userID != "NULL" AND r.isDefault = 1        <trim  suffixOverrides="," >            <if test="address != null" >                AND a.`cityID` = #{address}            </if>            <if test="huntingType != null" >AND h.id = #{huntingType}</if>            <if test="freeTime != null" >AND d.myDate > #{freeTime}</if>            <if test="maxEducation != null" >AND e.`educationLeavl` &lt; #{maxEducation}</if>            <if test="minEducation != null" >AND e.`educationLeavl` &gt; #{minEducation}</if>            <if test="sex != null" >AND r.`sex` LIKE #{sex}</if>        </trim>        GROUP BY r.id,e.id        ORDER BY e.`educationLeavl` DESC        LIMIT 0,10    </select>    <select id="findTypeNameWithUserID" parameterType="java.lang.String" resultType="java.util.Map">      SELECT h.name,h.id FROM `intentiontype` t LEFT JOIN `huntingtype` h ON h.id = t.htID WHERE t.userID = #{userID}    </select>        <update id="updateWithUserID" parameterType="java.lang.String">      UPDATE resume SET isDefault = 0 WHERE userID = #{userID}    </update>    <!-- 级联查询 -->    <select id="getMyResumeAllInfo" parameterType="String" resultMap="ResumeMap">        select <include refid="detailList"/> from resume r        left join workexperience on r.id = workexperience.resumeID        left join educational on r.id = educational.resumeID        left join document on r.id = document.resumeID        where 1 = 1        and r.id = #{id,jdbcType=VARCHAR}    </select>    <!--级联查询列-->    <sql id="detailList">        r.id as "id",r.resumeTitle as "resumeTitle",r.resumeHeadImg as "resumeHeadImg",r.resumeName as "resumeName",r.IDCard as "IDCard",r.sex as "sex",r.marriage as "marriage",r.phoneNumber as "phoneNumber",r.email as "email",r.residence as "residence",r.evaluation as "evaluation",r.userID as "userID",r.isDefault as "isDefault",r.state as "state",r.height as "height",r.weight as "weight",        educational.id as "educationalList.id",educational.schoolName as "educationalList.schoolName",educational.major as "educationalList.major",educational.education as "educationalList.education",educational.educationLeavl as "educationalList.educationLeavl",educational.timeSlot as "educationalList.timeSlot",educational.timeEnd as "educationalList.timeEnd",educational.association as "educationalList.association",educational.resumeID as "educationalList.resumeID",        workexperience.id as "workexperienceList.id",workexperience.companyName as "workexperienceList.companyName",workexperience.jobName as "workexperienceList.jobName",workexperience.startTime as "workexperienceList.startTime",workexperience.endTime as "workexperienceList.endTime",workexperience.jobContent as "workexperienceList.jobContent",workexperience.resumeID as "workexperienceList.resumeID",        document.id as "documentList.id",document.focumentImg as "documentList.focumentImg",document.resumeID as "documentList.resumeID",document.effective as "documentList.effective",document.documentName as "documentList.documentName"    </sql>    <!--Educational映射-->    <resultMap id="EducationalMap" type="Educational">        <id property="id" column="educationalList.id" />        <result property="version" column="educationalList.version" />        <result property="schoolName" column="educationalList.schoolName" />        <result property="major" column="educationalList.major" />        <result property="education" column="educationalList.education" />        <result property="educationLeavl" column="educationLeavl" />        <result property="timeSlot" column="educationalList.timeSlot" />        <result property="timeEnd" column="educationalList.timeEnd" />        <result property="association" column="educationalList.association" />        <result property="resumeID" column="educationalList.resumeID" />    </resultMap>    <!--Workexperience映射-->    <resultMap id="WorkexperienceMap" type="Workexperience">        <id property="id" column="workexperienceList.id" />        <result property="companyName" column="workexperienceList.companyName" />        <result property="jobName" column="workexperienceList.jobName" />        <result property="startTime" column="workexperienceList.startTime" />        <result property="endTime" column="workexperienceList.endTime" />        <result property="jobContent" column="workexperienceList.jobContent" />        <result property="resumeID" column="workexperienceList.resumeID" />    </resultMap>    <!--Document映射-->    <resultMap id="DocumentMap" type="Document">        <id property="id" column="documentList.id" />        <result property="focumentImg" column="documentList.focumentImg" />        <result property="resumeID" column="documentList.resumeID" />        <result property="effective" column="documentList.effective" />        <result property="documentName" column="documentList.documentName" />        <association property="attachment"  javaType="Attachment" resultMap="DocumentAttachmentMap"/>    </resultMap>    <!--Resume映射-->    <resultMap id="ResumeMap" type="Resume">        <id property="id" column="id" />        <result property="resumeTitle" column="resumeTitle" />        <result property="resumeHeadImg" column="resumeHeadImg" />        <result property="resumeName" column="resumeName" />        <result property="IDCard" column="IDCard" />        <result property="sex" column="sex" />        <result property="marriage" column="marriage" />        <result property="phoneNumber" column="phoneNumber" />        <result property="email" column="email" />        <result property="residence" column="residence" />        <result property="evaluation" column="evaluation" />        <result property="userID" column="userID" />        <result property="isDefault" column="isDefault" />        <result property="state" column="state" />        <result property="height" column="height" />        <result property="weight" column="weight" />        <collection property="educationalList" resultMap="EducationalMap" />        <collection property="workexperienceList" resultMap="WorkexperienceMap" />        <collection property="documentList" resultMap="DocumentMap" />    </resultMap>    <!--级联查询-->    <sql id="mySeekerList">        r.id as 'id',        r.version as 'version',r.resumeTitle as 'resumeTitle',r.resumeHeadImg as 'resumeHeadImg',r.resumeName as 'resumeName',r.IDCard as 'IDCard',r.sex as 'sex',r.marriage as 'marriage',r.phoneNumber as 'phoneNumber',r.email as 'email',r.residence as 'residence',r.evaluation as 'evaluation',r.userID as 'userID',r.isDefault as 'isDefault',r.state as 'state',r.height as 'height',r.weight as 'weight',r.`createTime`AS 'createTime',        educationalList.id as 'educationalList.id',        educationalList.version as 'educationalList.version',educationalList.schoolName as 'educationalList.schoolName',educationalList.major as 'educationalList.major',educationalList.education as 'educationalList.education',educationalList.educationLeavl as 'educationLeavl',educationalList.timeSlot as 'educationalList.timeSlot',educationalList.timeEnd as 'educationalList.timeEnd',educationalList.association as 'educationalList.association',educationalList.resumeID as 'educationalList.resumeID',        attachmentResume.id as 'attachment.id',        attachmentResume.version as 'attachment.version',attachmentResume.datestr as 'attachment.datestr',attachmentResume.path as 'attachment.path',attachmentResume.name as 'attachment.name',attachmentResume.title as 'attachment.title',attachmentResume.type as 'attachment.type',attachmentResume.refID as 'attachment.refID',        intentiontypeList.id as 'intentiontypeList.id',        intentiontypeList.version as 'intentiontypeList.version',intentiontypeList.userID as 'intentiontypeList.userID',intentiontypeList.htID as 'intentiontypeList.htID',        huntingtype.id as 'intentiontypeList.huntingtype.id',        huntingtype.version as 'intentiontypeList.huntingtype.version',huntingtype.name as 'intentiontypeList.huntingtype.name',huntingtype.HTFatCode as 'intentiontypeList.huntingtype.HTFatCode',huntingtype.state as 'intentiontypeList.huntingtype.state',huntingtype.codeGrade as 'intentiontypeList.huntingtype.codeGrade',        user.id as 'user.id',        user.version as 'user.version',user.accountNo as 'user.accountNo',user.password as 'user.password',user.weChatNo as 'user.weChatNo',user.nickName as 'user.nickName',user.sex as 'user.sex',user.phoneNumber as 'user.phoneNumber',user.lastLoginTime as 'user.lastLoginTime',user.loginTime as 'user.loginTime',user.status as 'user.status',user.realName as 'user.realName',user.IDCard as 'user.IDCard',user.infoHeadImg as 'user.infoHeadImg',user.locked as 'user.locked',user.userSig as 'user.userSig',user.birthday as 'user.birthday',        weixin.id as 'user.weixin.id',        weixin.version as 'user.weixin.version',weixin.nickname as 'user.weixin.nickname',weixin.sex as 'user.weixin.sex',weixin.province as 'user.weixin.province',weixin.city as 'user.weixin.city',weixin.country as 'user.weixin.country',weixin.headimgurl as 'user.weixin.headimgurl',weixin.privilegeStr as 'user.weixin.privilegeStr',weixin.unionid as 'user.weixin.unionid',weixin.openid as 'user.weixin.openid',weixin.userID as 'user.weixin.userID',weixin.refreshToken as 'user.weixin.refreshToken',weixin.accessToken as 'user.weixin.accessToken',weixin.refreshTokenTime as 'user.weixin.refreshTokenTime',weixin.accessTokenTime as 'user.weixin.accessTokenTime',weixin.ticket as 'user.weixin.ticket',weixin.ticketTime as 'user.weixin.ticketTime',        attachment.id as 'user.attachment.id',        attachment.version as 'user.attachment.version',attachment.datestr as 'user.attachment.datestr',attachment.path as 'user.attachment.path',attachment.name as 'user.attachment.name',attachment.title as 'user.attachment.title',attachment.type as 'user.attachment.type',attachment.refID as 'user.attachment.refID'    </sql>    <!--Resume映射-->    <resultMap id="ResumeOfSeekerMap" type="Resume">        <id property="id" column="id" />        <result property="version" column="version" />        <result property="resumeTitle" column="resumeTitle" />        <result property="resumeHeadImg" column="resumeHeadImg" />        <result property="resumeName" column="resumeName" />        <result property="IDCard" column="IDCard" />        <result property="sex" column="sex" />        <result property="marriage" column="marriage" />        <result property="phoneNumber" column="phoneNumber" />        <result property="email" column="email" />        <result property="residence" column="residence" />        <result property="evaluation" column="evaluation" />        <result property="userID" column="userID" />        <result property="isDefault" column="isDefault" />        <result property="state" column="state" />        <result property="height" column="height" />        <result property="weight" column="weight" />        <association property="attachment"  javaType="Attachment" resultMap="SearchResumeAttachmentMap"/>        <association property="user"  javaType="User" resultMap="SearchUserMap"/>        <collection property="educationalList" resultMap="EducationalMap" />        <collection property="intentiontypeList" resultMap="IntentiontypeMap" />    </resultMap>    <!--Huntingtype映射-->    <resultMap id="HuntingtypeMap" type="Huntingtype">        <id property="id" column="intentiontypeList.huntingtype.id" />        <result property="version" column="intentiontypeList.huntingtype.version" />        <result property="name" column="intentiontypeList.huntingtype.name" />        <result property="HTFatCode" column="intentiontypeList.huntingtype.HTFatCode" />        <result property="state" column="intentiontypeList.huntingtype.state" />        <result property="codeGrade" column="intentiontypeList.huntingtype.codeGrade" />        <result property="isSelected" column="intentiontypeList.huntingtype.isSelected" />        <result property="refId" column="intentiontypeList.huntingtype.refId" />    </resultMap>    <!--Intentiontype映射-->    <resultMap id="IntentiontypeMap" type="Intentiontype">        <id property="id" column="intentiontypeList.id" />        <result property="version" column="intentiontypeList.version" />        <result property="userID" column="intentiontypeList.userID" />        <result property="htID" column="intentiontypeList.htID" />        <association property="huntingtype"  javaType="Huntingtype" resultMap="HuntingtypeMap"/>    </resultMap>    <!--Attachment映射-->    <resultMap id="AttachmentMap" type="Attachment">        <id property="id" column="user.attachment.id" />        <result property="version" column="user.attachment.version" />        <result property="datestr" column="user.attachment.datestr" />        <result property="path" column="user.attachment.path" />        <result property="name" column="user.attachment.name" />        <result property="title" column="user.attachment.title" />        <result property="type" column="user.attachment.type" />        <result property="refID" column="user.attachment.refID" />    </resultMap>    <!--User映射-->    <resultMap id="UserMap" type="User">        <id property="id" column="user.id" />        <result property="version" column="user.version" />        <result property="accountNo" column="user.accountNo" />        <result property="password" column="user.password" />        <result property="weChatNo" column="user.weChatNo" />        <result property="nickName" column="user.nickName" />        <result property="sex" column="user.sex" />        <result property="phoneNumber" column="user.phoneNumber" />        <result property="lastLoginTime" column="user.lastLoginTime" />        <result property="loginTime" column="user.loginTime" />        <result property="status" column="user.status" />        <result property="realName" column="user.realName" />        <result property="IDCard" column="user.IDCard" />        <result property="infoHeadImg" column="user.infoHeadImg" />        <result property="locked" column="user.locked" />        <result property="userSig" column="user.userSig" />        <result property="birthday" column="user.birthday" />        <association property="attachment"  javaType="Attachment" resultMap="AttachmentMap"/>    </resultMap>    <select id="mySeekerPage" resultMap="ResumeOfSeekerMap">        SELECT            <include refid="mySeekerList"/>            from  resume r            left join attachment attachmentResume on r.resumeHeadImg = attachmentResume.id            left join educational educationalList on r.id = educationalList.resumeID            left join intentiontype intentiontypeList on r.userID = intentiontypeList.userID            left join huntingtype huntingtype on intentiontypeList.htID = huntingtype.id            left join shiro_user user on r.userID = user.id            left join attachment attachment on user.infoHeadImg = attachment.id            left join weixin weixin on user.id = weixin.userID        WHERE r.userID IN            (SELECT                i.userID            FROM                intentiontype i            WHERE 1=1                <choose>                  <when test="condition.huntingtypeID == null" >                      and htID IN                      (SELECT                      p.workTypeID                      FROM                      `position` p                      WHERE p.userID = #{condition.userID}                      GROUP BY p.workTypeID)                  </when>                  <otherwise>                      and huntingtype.id = #{condition.huntingtypeID}                  </otherwise>                </choose>                AND i.userID != #{condition.userID})        AND r.isDefault = TRUE AND r.state = TRUE AND r.isDeleted = FALSE        ORDER BY educationalList.`educationLeavl`,r.createTime DESC    </select>    <select id="mySeekerPageOfUserID" resultType="java.lang.String">        SELECT        r.userID        from  resume r        left join attachment attachmentResume on r.resumeHeadImg = attachmentResume.id        left join educational educationalList on r.id = educationalList.resumeID        left join intentiontype intentiontypeList on r.userID = intentiontypeList.userID        left join huntingtype huntingtype on intentiontypeList.htID = huntingtype.id        left join shiro_user user on r.userID = user.id        left join attachment attachment on user.infoHeadImg = attachment.id        left join weixin weixin on user.id = weixin.userID        WHERE r.userID IN        (SELECT        i.userID        FROM        intentiontype i        WHERE 1=1        <choose>            <when test="condition.huntingtypeID == null" >                and htID IN                (SELECT                p.workTypeID                FROM                `position` p                WHERE p.userID = #{condition.userID}                GROUP BY p.workTypeID)            </when>            <otherwise>                and huntingtype.id = #{condition.huntingtypeID}            </otherwise>        </choose>        AND i.userID != #{condition.userID})        AND r.isDefault = TRUE AND r.state = TRUE AND r.isDeleted = FALSE        ORDER BY educationalList.`educationLeavl`,r.createTime DESC    </select>    <select id="findOtherResumePage" resultMap="ResumeOfSeekerMap">        SELECT * FROM ( SELECT        <include refid="mySeekerList"/>        from  resume r        left join attachment attachmentResume on r.resumeHeadImg = attachmentResume.id        left join educational educationalList on r.id = educationalList.resumeID        left join intentiontype intentiontypeList on r.userID = intentiontypeList.userID        left join huntingtype huntingtype on intentiontypeList.htID = huntingtype.id        left join shiro_user user on r.userID = user.id        left join attachment attachment on user.infoHeadImg = attachment.id        left join weixin weixin on user.id = weixin.userID        WHERE r.userID NOT IN        (SELECT        i.userID        FROM        intentiontype i        WHERE 1=1        <choose>            <when test="condition.huntingtypeID == null" >                and htID IN                (SELECT                p.workTypeID                FROM                `position` p                WHERE p.userID = #{condition.userID}                GROUP BY p.workTypeID)            </when>            <otherwise>                and huntingtype.id = #{condition.huntingtypeID}            </otherwise>        </choose>        AND i.userID != #{condition.userID})        AND r.userID != #{condition.userID}        AND r.isDefault = TRUE AND r.state = TRUE AND r.isDeleted = FALSE  GROUP BY r.userID)r        <if test="ids!=null">          <if test="ids.size>0">              WHERE userID NOT IN              <foreach item="items" index="index" collection="ids" open="(" separator="," close=")">                  #{items}              </foreach>          </if>        </if>        ORDER BY `educationLeavl`,        createTime DESC    </select>    <!--对象的多级映射 mapList mapPage mapOne-->    <select id="getResumeForRecruit" resultMap="getResumeForRecruitResumeMap" parameterType="java.lang.String">        select        <include refid="oneResumeInfoList"/>        from  resume r        left join attachment attachmentResume on r.resumeHeadImg = attachmentResume.id        left join educational educationalList on r.id = educationalList.resumeID  AND educationalList.isDeleted=FALSE        left join intentiontype intentiontypeList on r.userID = intentiontypeList.userID        left join huntingtype huntingtype on intentiontypeList.htID = huntingtype.id        left join shiro_user user on r.userID = user.id        left join attachment attachment on user.infoHeadImg = attachment.id        left join workexperience workexperienceList on r.id = workexperienceList.resumeID AND workexperienceList.isDeleted=FALSE        left join document documentList on r.id = documentList.resumeID AND documentList.isDeleted=FALSE        left join attachment docattachment on documentList.focumentImg = docattachment.id        left join weixin weixin on user.id = weixin.userID        WHERE r.id = #{id} AND  r.isDeleted=FALSE ORDER BY educationalList.`educationLeavl` DESC    </select>    <!--Resume映射-->    <resultMap id="getResumeForRecruitResumeMap" type="Resume">        <id property="id" column="id" />        <result property="version" column="version" />        <result property="resumeTitle" column="resumeTitle" />        <result property="resumeHeadImg" column="resumeHeadImg" />        <result property="resumeName" column="resumeName" />        <result property="IDCard" column="IDCard" />        <result property="sex" column="sex" />        <result property="marriage" column="marriage" />        <result property="phoneNumber" column="phoneNumber" />        <result property="email" column="email" />        <result property="residence" column="residence" />        <result property="evaluation" column="evaluation" />        <result property="userID" column="userID" />        <result property="isDefault" column="isDefault" />        <result property="state" column="state" />        <result property="height" column="height" />        <result property="weight" column="weight" />        <association property="attachment"  javaType="Attachment" resultMap="SearchResumeAttachmentMap"/>        <association property="user"  javaType="User" resultMap="SearchUserMap"/>        <collection property="educationalList" resultMap="EducationalMap" />        <collection property="intentiontypeList" resultMap="IntentiontypeMap" />        <collection property="workexperienceList" resultMap="WorkexperienceMap" />        <collection property="documentList" resultMap="DocumentMap" />    </resultMap>    <!--Attachment映射-->    <resultMap id="DocumentAttachmentMap" type="Attachment">        <id property="id" column="documentList.docattachment.id" />        <result property="version" column="documentList.docattachment.version" />        <result property="datestr" column="documentList.docattachment.datestr" />        <result property="path" column="documentList.docattachment.path" />        <result property="name" column="documentList.docattachment.name" />        <result property="title" column="documentList.docattachment.title" />        <result property="type" column="documentList.docattachment.type" />        <result property="refID" column="documentList.docattachment.refID" />    </resultMap>    <!--级联查询-->    <sql id="oneResumeInfoList">        r.id as 'id',        r.version as 'version',r.resumeTitle as 'resumeTitle',r.resumeHeadImg as 'resumeHeadImg',r.resumeName as 'resumeName',r.IDCard as 'IDCard',r.sex as 'sex',r.marriage as 'marriage',r.phoneNumber as 'phoneNumber',r.email as 'email',r.residence as 'residence',r.evaluation as 'evaluation',r.userID as 'userID',r.isDefault as 'isDefault',r.state as 'state',r.height as 'height',r.weight as 'weight',        attachmentResume.id as 'attachment.id',        attachmentResume.version as 'attachment.version',attachmentResume.datestr as 'attachment.datestr',attachmentResume.path as 'attachment.path',attachmentResume.name as 'attachment.name',attachmentResume.title as 'attachment.title',attachmentResume.type as 'attachment.type',attachmentResume.refID as 'attachment.refID',        educationalList.id as 'educationalList.id',        educationalList.version as 'educationalList.version',educationalList.schoolName as 'educationalList.schoolName',educationalList.major as 'educationalList.major',educationalList.education as 'educationalList.education',educationalList.educationLeavl as 'educationalList.educationLeavl',educationalList.timeSlot as 'educationalList.timeSlot',educationalList.timeEnd as 'educationalList.timeEnd',educationalList.association as 'educationalList.association',educationalList.resumeID as 'educationalList.resumeID',        intentiontypeList.id as 'intentiontypeList.id',        intentiontypeList.version as 'intentiontypeList.version',intentiontypeList.userID as 'intentiontypeList.userID',intentiontypeList.htID as 'intentiontypeList.htID',        huntingtype.id as 'intentiontypeList.huntingtype.id',        huntingtype.version as 'intentiontypeList.huntingtype.version',huntingtype.name as 'intentiontypeList.huntingtype.name',huntingtype.HTFatCode as 'intentiontypeList.huntingtype.HTFatCode',huntingtype.state as 'intentiontypeList.huntingtype.state',huntingtype.codeGrade as 'intentiontypeList.huntingtype.codeGrade',        user.id as 'user.id',        user.version as 'user.version',user.accountNo as 'user.accountNo',user.password as 'user.password',user.weChatNo as 'user.weChatNo',user.nickName as 'user.nickName',user.sex as 'user.sex',user.phoneNumber as 'user.phoneNumber',user.lastLoginTime as 'user.lastLoginTime',user.loginTime as 'user.loginTime',user.status as 'user.status',user.realName as 'user.realName',user.IDCard as 'user.IDCard',user.infoHeadImg as 'user.infoHeadImg',user.locked as 'user.locked',user.userSig as 'user.userSig',user.birthday as 'user.birthday',        weixin.id as 'user.weixin.id',        weixin.version as 'user.weixin.version',weixin.nickname as 'user.weixin.nickname',weixin.sex as 'user.weixin.sex',weixin.province as 'user.weixin.province',weixin.city as 'user.weixin.city',weixin.country as 'user.weixin.country',weixin.headimgurl as 'user.weixin.headimgurl',weixin.privilegeStr as 'user.weixin.privilegeStr',weixin.unionid as 'user.weixin.unionid',weixin.openid as 'user.weixin.openid',weixin.userID as 'user.weixin.userID',weixin.refreshToken as 'user.weixin.refreshToken',weixin.accessToken as 'user.weixin.accessToken',weixin.refreshTokenTime as 'user.weixin.refreshTokenTime',weixin.accessTokenTime as 'user.weixin.accessTokenTime',weixin.ticket as 'user.weixin.ticket',weixin.ticketTime as 'user.weixin.ticketTime',        attachment.id as 'user.attachment.id',        attachment.version as 'user.attachment.version',attachment.datestr as 'user.attachment.datestr',attachment.path as 'user.attachment.path',attachment.name as 'user.attachment.name',attachment.title as 'user.attachment.title',attachment.type as 'user.attachment.type',attachment.refID as 'user.attachment.refID',        workexperienceList.id as 'workexperienceList.id',        workexperienceList.version as 'workexperienceList.version',workexperienceList.companyName as 'workexperienceList.companyName',workexperienceList.jobName as 'workexperienceList.jobName',workexperienceList.startTime as 'workexperienceList.startTime',workexperienceList.endTime as 'workexperienceList.endTime',workexperienceList.jobContent as 'workexperienceList.jobContent',workexperienceList.resumeID as 'workexperienceList.resumeID',        documentList.id as 'documentList.id',        documentList.version as 'documentList.version',documentList.focumentImg as 'documentList.focumentImg',documentList.resumeID as 'documentList.resumeID',documentList.effective as 'documentList.effective',documentList.documentName as 'documentList.documentName',        docattachment.id as 'documentList.docattachment.id',        docattachment.version as 'documentList.docattachment.version',docattachment.datestr as 'documentList.docattachment.datestr',docattachment.path as 'documentList.docattachment.path',docattachment.name as 'documentList.docattachment.name',docattachment.title as 'documentList.docattachment.title',docattachment.type as 'documentList.docattachment.type',docattachment.refID as 'documentList.docattachment.refID'    </sql>    <select id="selectResumeNoReq" parameterType="java.lang.String" resultType="Resume" >        SELECT <include refid="columnList" />  FROM resume r where r.id = #{id};    </select>    <!-- 搜索 -->    <!--级联查询-->    <sql id="searchPersonResumeList">        r.id AS 'id',        r.resumeTitle AS 'resumeTitle',r.resumeHeadImg AS 'resumeHeadImg',r.resumeName AS 'resumeName',r.sex AS 'sex',r.residence AS 'residence',r.evaluation AS 'evaluation',r.userID AS 'userID',r.isDefault AS 'isDefault',r.state AS 'state',r.height AS 'height',r.weight AS 'weight',        educationalList.id as 'educationalList.id',        educationalList.version as 'educationalList.version',educationalList.schoolName as 'educationalList.schoolName',educationalList.major as 'educationalList.major',educationalList.education as 'educationalList.education',educationalList.educationLeavl as 'educationalList.educationLeavl',educationalList.timeSlot as 'educationalList.timeSlot',educationalList.timeEnd as 'educationalList.timeEnd',educationalList.association as 'educationalList.association',educationalList.resumeID as 'educationalList.resumeID',        attachmentResume.id AS 'attachment.id',        attachmentResume.datestr AS 'attachment.datestr',attachmentResume.path AS 'attachment.path',attachmentResume.name AS 'attachment.name',attachmentResume.title AS 'attachment.title',attachmentResume.type AS 'attachment.type',attachmentResume.refID AS 'attachment.refID',        intentiontypeList.id AS 'intentiontypeList.id',        intentiontypeList.userID AS 'intentiontypeList.userID',intentiontypeList.htID AS 'intentiontypeList.htID',        huntingtype.id AS 'intentiontypeList.huntingtype.id',        huntingtype.name AS 'intentiontypeList.huntingtype.name',huntingtype.HTFatCode AS 'intentiontypeList.huntingtype.HTFatCode',huntingtype.state AS 'intentiontypeList.huntingtype.state',huntingtype.codeGrade AS 'intentiontypeList.huntingtype.codeGrade',        user.id AS 'user.id',        user.accountNo AS 'user.accountNo',user.weChatNo AS 'user.weChatNo',user.nickName AS 'user.nickName',user.realName AS 'user.realName',        attachmentUser.id AS 'user.attachment.id',        attachmentUser.datestr AS 'user.attachment.datestr',attachmentUser.path AS 'user.attachment.path',attachmentUser.name AS 'user.attachment.name',attachmentUser.title AS 'user.attachment.title',attachmentUser.type AS 'user.attachment.type',attachmentUser.refID AS 'user.attachment.refID',        weixin.headimgurl AS 'user.weixin.headimgurl'    </sql>    <!--Attachment映射-->    <resultMap id="SearchResumeAttachmentMap" type="Attachment">        <id property="id" column="attachment.id" />        <result property="datestr" column="attachment.datestr" />        <result property="path" column="attachment.path" />        <result property="name" column="attachment.name" />        <result property="title" column="attachment.title" />        <result property="type" column="attachment.type" />        <result property="refID" column="attachment.refID" />    </resultMap>    <!--Huntingtype映射-->    <resultMap id="SearchHuntingtypeMap" type="Huntingtype">        <id property="id" column="intentiontypeList.huntingtype.id" />        <result property="name" column="intentiontypeList.huntingtype.name" />        <result property="HTFatCode" column="intentiontypeList.huntingtype.HTFatCode" />        <result property="state" column="intentiontypeList.huntingtype.state" />        <result property="codeGrade" column="intentiontypeList.huntingtype.codeGrade" />    </resultMap>    <!--Intentiontype映射-->    <resultMap id="SearchIntentiontypeMap" type="Intentiontype">        <id property="id" column="intentiontypeList.id" />        <result property="userID" column="intentiontypeList.userID" />        <result property="htID" column="intentiontypeList.htID" />        <association property="huntingtype"  javaType="Huntingtype" resultMap="SearchHuntingtypeMap"/>    </resultMap>    <!--Attachment映射-->    <resultMap id="SearchUserAttachmentMap" type="Attachment">        <id property="id" column="user.attachment.id" />        <result property="datestr" column="user.attachment.datestr" />        <result property="path" column="user.attachment.path" />        <result property="name" column="user.attachment.name" />        <result property="title" column="user.attachment.title" />        <result property="type" column="user.attachment.type" />        <result property="refID" column="user.attachment.refID" />    </resultMap>    <!--Weixin映射-->    <resultMap id="WeixinMap" type="Weixin">        <result property="headimgurl" column="user.weixin.headimgurl" />    </resultMap>    <!--User映射-->    <resultMap id="SearchUserMap" type="User">        <id property="id" column="user.id" />        <result property="accountNo" column="user.accountNo" />        <result property="weChatNo" column="user.weChatNo" />        <result property="nickName" column="user.nickName" />        <result property="realName" column="user.realName" />        <result property="infoHeadImg" column="user.infoHeadImg" />        <result property="birthday" column="user.birthday" />        <association property="attachment"  javaType="Attachment" resultMap="SearchUserAttachmentMap"/>        <association property="weixin"  javaType="Weixin" resultMap="WeixinMap"/>    </resultMap>    <!--Attachment映射-->    <resultMap id="SearchDocumentAttachmentMap" type="Attachment">        <id property="id" column="documentList.attachment.id" />        <result property="datestr" column="documentList.attachment.datestr" />        <result property="path" column="documentList.attachment.path" />        <result property="name" column="documentList.attachment.name" />        <result property="title" column="documentList.attachment.title" />        <result property="type" column="documentList.attachment.type" />        <result property="refID" column="documentList.attachment.refID" />    </resultMap>    <!--Resume映射-->    <resultMap id="searchPersonResumeMap" type="Resume">        <id property="id" column="id" />        <result property="resumeTitle" column="resumeTitle" />        <result property="resumeHeadImg" column="resumeHeadImg" />        <result property="resumeName" column="resumeName" />        <result property="IDCard" column="IDCard" />        <result property="sex" column="sex" />        <result property="marriage" column="marriage" />        <result property="phoneNumber" column="phoneNumber" />        <result property="email" column="email" />        <result property="residence" column="residence" />        <result property="evaluation" column="evaluation" />        <result property="userID" column="userID" />        <result property="isDefault" column="isDefault" />        <result property="state" column="state" />        <result property="height" column="height" />        <result property="weight" column="weight" />        <association property="attachment"  javaType="Attachment" resultMap="SearchResumeAttachmentMap"/>        <association property="user"  javaType="User" resultMap="SearchUserMap"/>        <collection property="intentiontypeList" resultMap="SearchIntentiontypeMap" />        <collection property="educationalList" resultMap="EducationalMap" />    </resultMap>    <select id="searchPersonResumePage" resultMap="searchPersonResumeMap">        select        <include refid="searchPersonResumeList"/>        FROM  resume r        LEFT JOIN view_educational educationalList ON r.id = educationalList.resumeID        LEFT JOIN attachment attachmentResume ON r.resumeHeadImg = attachmentResume.id        LEFT JOIN intentiontype intentiontypeList ON r.userID = intentiontypeList.userID        LEFT JOIN intentionaddress intentionaddress ON intentionaddress.`userID` = r.`userID`        LEFT JOIN huntingtype huntingtype ON intentiontypeList.htID = huntingtype.id        LEFT JOIN shiro_user USER ON r.userID = user.id        LEFT JOIN attachment attachmentUser ON user.infoHeadImg = attachmentUser.id        LEFT JOIN weixin weixin ON user.id = weixin.userID        WHERE r.isDeleted = FALSE and r.isDefault = TRUE        <if test="condition.search != null">            AND r.resumeName LIKE concat(concat('%',#{condition.search}),'%')        </if>        <if test="condition.workTypeID != null">            AND intentiontypeList.htID = #{condition.workTypeID}        </if>        <if test="condition.sexRequirements != null">            AND r.sex = #{condition.sexRequirements}        </if>        <if test="condition.addrList!=null">            AND intentionaddress.cityID IN            <foreach item="items" index="index" collection="ids" open="(" separator="," close=")">                #{items}            </foreach>        </if>        <if test="condition.education != null">            AND educationalList.educationLeavl &gt;= #{condition.education}        </if>        group by r.userID        ORDER BY r.`createTime` DESC    </select>    <!--order by educationalList.educationLeavl desc--></mapper>