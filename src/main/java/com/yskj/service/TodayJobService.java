package com.yskj.service;import com.yskj.dao.TodayJobDao;import com.yskj.models.Beenrecruited;import com.yskj.models.QueryParam;import com.yskj.models.Resume;import com.yskj.models.TodayJob;import com.yskj.service.base.AbstractService;import com.yskj.utils.DateUtils;import com.yskj.utils.IJobSecurityUtils;import com.yskj.utils.UUIDGenerator;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import java.util.Date;import java.util.List;@Servicepublic class TodayJobService extends AbstractService {	@Autowired    private TodayJobDao todayJobDao;	@Autowired	private ResumeService resumeService;	@Autowired	private BeenrecruitedService beenrecruitedService;	public TodayJobService() {		super();	}	@Override	public TodayJobDao getDao() {		return this.todayJobDao;	}	@Transactional	public void generalTodayJob()throws Exception{		this.getDao().deleteAll();		QueryParam queryParam  = new QueryParam();		queryParam.put("isDeleted",false);		queryParam.put("state",4);		List<Beenrecruited> list =  beenrecruitedService.findList(queryParam);		for(Beenrecruited beenrecruited : list){			if(DateUtils.isWorkDayByToday(beenrecruited.getWorkDate())){				TodayJob todayJob = new TodayJob();				todayJob.setPositionID(beenrecruited.getPositionID());				todayJob.setUserID(beenrecruited.getCreateBy());				todayJob.setBeenID(beenrecruited.getId());				todayJob.setId(UUIDGenerator.randomUUID());				todayJob.setCreateTime(new Date());				todayJob.setUpdateTime(todayJob.getCreateTime());				this.getDao().add(todayJob);			}		}	}	public List<TodayJob> unSignList(QueryParam queryParam)throws Exception{		return this.getDao().unSignList(queryParam);	}}