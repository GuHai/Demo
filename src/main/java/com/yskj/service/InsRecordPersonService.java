package com.yskj.service;import com.yskj.dao.InsRecordPersonDao;import com.yskj.models.InsPerson;import com.yskj.models.InsRecordPerson;import com.yskj.models.QueryParam;import com.yskj.service.base.AbstractService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import java.util.List;@Servicepublic class InsRecordPersonService extends AbstractService {	@Autowired    private InsRecordPersonDao insRecordPersonDao;	@Autowired	private InsPersonService insPersonService ;	public InsRecordPersonService() {		super();	}	@Override	public InsRecordPersonDao getDao() {		return this.insRecordPersonDao;	}	public InsRecordPerson getProfessionTypeMap(QueryParam queryParam){		return getDao().getProfessionTypeMap(queryParam);	}	public InsRecordPerson getInsDetailMap(QueryParam queryParam){		return getDao().getInsDetailMap(queryParam);	}	public void deleteForInsert(String recordID){		getDao().deleteForInsert(recordID);	}	@Transactional	public void saveInsRecordPersonList (List<InsRecordPerson> insRecordPersonList) throws Exception{		String recordID = insRecordPersonList.get(0).getRecordID();		this.deleteForInsert(recordID);		if(insRecordPersonList.get(0).getIsNull()==null){			for (InsRecordPerson insRecordPerson : insRecordPersonList){				InsPerson insPerson = insPersonService.get(insRecordPerson.getPersonID());				if(insPerson==null){					insPerson = insRecordPerson.getInsPerson();					Integer temp = 0 ;					if(insPerson.getCardID()!=null){						temp = Integer.parseInt(insRecordPerson.getInsPerson().getCardID().substring(16,17));					}					if((temp%2)==0){						insPerson.setSex(2);					}else{						insPerson.setSex(1);					}					insPersonService.add(insPerson);				}				insRecordPerson.setPersonID(insPerson.getId());				this.add(insRecordPerson);			}		}	}}